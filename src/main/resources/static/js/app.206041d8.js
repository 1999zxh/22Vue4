(function(t){function e(e){for(var n,i,o=e[0],u=e[1],c=e[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,o=1;o<r.length;o++){var u=r[o];0!==s[u]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},s={app:0},a=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("85ec"),s=r.n(n);s.a},"336d":function(t,e,r){"use strict";var n=r("c14f"),s=r.n(n);s.a},"466f":function(t,e,r){"use strict";var n=r("81e1"),s=r.n(n);s.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],i=(r("034f"),r("2877")),o={},u=Object(i["a"])(o,s,a,!1,null,null,null),c=u.exports,l=r("8c4f"),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"index"},[r("nav",[r("router-link",{attrs:{to:"/login"}},[t._v("登录")]),r("router-link",{attrs:{to:"/register"}},[t._v("注册")])],1),t._m(0)])},d=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("h2",[t._v("欢迎进入我们的MALL")])])}],f={name:"Index",mounted:function(){if(this.$cookies.isKey("username")){var t=this.$cookies.get("username");this.$store.commit("setLoginUser",t),this.$router.push("/productlist")}}},h=f,m=(r("e337"),Object(i["a"])(h,p,d,!1,null,"95ec4294",null)),v=m.exports,g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[r("h3",[t._v("用户登录")]),r("p",[r("Input",{staticClass:"input",attrs:{prefix:"ios-contact",placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),r("p",[r("Input",{staticClass:"input",attrs:{prefix:"ios-lock",type:"password",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("p",[r("Checkbox",{model:{value:t.save,callback:function(e){t.save=e},expression:"save"}},[t._v("登录名和密码保留一周")])],1),r("p",[r("Button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){return t.doLogin()}}},[t._v("登录")]),r("Button",{staticClass:"btn",attrs:{type:"primary",to:"/register"}},[t._v("注册")])],1)])},_=[],b=r("bc3a"),y=r.n(b),x={name:"Login",data:function(){return{username:"",password:"",save:!1}},methods:{doLogin:function(){var t=this;y.a.post("http://localhost:8080/api/login",{username:this.username,password:this.password}).then((function(e){e.data?(t.save&&t.$cookies.set("username",t.username,"7d"),t.$store.commit("setLoginUser",t.username),t.$router.push("/productlist")):(alert("用户名或密码错误，请重新输入"),t.username="",t.password="")}))}}},w=x,$=(r("466f"),Object(i["a"])(w,g,_,!1,null,"6db3049e",null)),C=$.exports,k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"register"},[r("h3",[t._v("用户注册")]),r("p",[r("Input",{staticClass:"input",attrs:{prefix:"ios-contact",placeholder:"请输入用户名"},on:{"on-blur":function(e){return t.validateUser()}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),r("span",{staticClass:"err"},[t._v(t._s(t.errmsg1))])],1),r("p",[r("Input",{staticClass:"input",attrs:{prefix:"ios-lock",placeholder:"请输入密码"},on:{"on-blur":function(e){return t.validatePass()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("span",{staticClass:"err"},[t._v(t._s(t.errmsg2))])],1),r("p",[r("Input",{staticClass:"input",attrs:{prefix:"ios-lock",placeholder:"请再次确认密码"},on:{"on-blur":function(e){return t.validatePass2()}},model:{value:t.passagain,callback:function(e){t.passagain=e},expression:"passagain"}}),r("span",{staticClass:"err"},[t._v(t._s(t.errmsg3))])],1),r("p",[r("Button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){return t.doRegister()}}},[t._v("注册")]),r("Button",{staticClass:"btn",attrs:{type:"primary"}},[t._v("重置")])],1)])},P=[],O=(r("4d63"),r("ac1f"),r("25f0"),{name:"Register",data:function(){return{username:"",password:"",passagain:"",errmsg1:"",errmsg2:"",errmsg3:""}},methods:{validateUser:function(){var t=this,e=!0;return""==this.username?(this.errmsg1="用户名不能为空",e=!1):y.a.get("http://localhost:8080/api/isexist",{params:{username:this.username}}).then((function(r){r.data&&(t.errmsg1="用户名已存在",e=!1)})),1==e&&(this.errmsg1=""),e},validatePass:function(){var t=!0;if(""==this.password)this.errmsg2="密码不能为空",t=!1;else{var e=new RegExp(/^\w{6,16}$/);t=e.test(this.password),t||(this.errmsg2="密码需为6-16位字符 ")}return t&&(this.errmsg2=""),t},validatePass2:function(){var t=!0;return""==this.passagain?(t=!1,this.errmsg3="请输入确认密码"):this.passagain!=this.password&&(t=!1,this.errmsg3="两次密码不一致"),t&&(this.errmsg3=""),t},validate:function(){var t=this.validateUser(),e=this.validatePass(),r=this.validatePass2();return t&&e&&r},doRegister:function(){var t=this;this.validate()&&y.a.post("http://localhost:8080/api/register",{username:this.username,password:this.password}).then((function(e){e.data&&(alert("注册成功，将跳转到登录页面"),t.$router.push("/login"))}))}}}),j=O,L=(r("6a03"),Object(i["a"])(j,k,P,!1,null,"5fdf90b6",null)),E=L.exports,I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"productList"},[r("nav",[r("span",{staticStyle:{"margin-right":"20px"}},[t._v("欢迎您："+t._s(this.$store.state.loginuser))]),r("router-link",{attrs:{to:"/login"},nativeOn:{click:function(e){return t.logout()}}},[t._v("登出")])],1),r("div",{staticClass:"list"},t._l(t.showlist,(function(t,e){return r("product",{key:e,attrs:{info:t}})})),1),r("div",{staticClass:"page"},[r("Page",{attrs:{total:t.total,current:t.current,"page-size":t.size,"prev-text":"上一页","next-text":"下一页"},on:{"on-change":t.change}})],1)])},S=[],B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product"},[r("img",{attrs:{src:t.info.imgurl,alt:""}}),r("p",[t._v("商品名称："+t._s(t.info.name))]),r("p",[t._v("商品价格："+t._s(t.info.price))]),r("p",[r("router-link",{attrs:{to:{name:"details",query:{id:t.info.id}}}},[t._v("查看详情")])],1)])},U=[],z={name:"Product",data:function(){return{}},props:["info"]},M=z,R=(r("6e32"),Object(i["a"])(M,B,U,!1,null,"8f8751cc",null)),T=R.exports,q={name:"ProductList",data:function(){return{prodlist:[],current:1,size:4,showlist:[]}},computed:{total:function(){return this.prodlist.length}},components:{product:T},mounted:function(){var t=this;""==this.$store.state.loginuser?this.$router.push("/"):y.a.post("http://localhost:8080/api/getproductlist").then((function(e){t.prodlist=e.data,t.$store.commit("setProdList",t.prodlist),t.change(t.current)}))},methods:{logout:function(){this.$cookies.isKey("username")&&this.$cookies.remove("username"),this.$store.commit("setLoginUser","")},change:function(t){this.current=t,this.showlist=[];for(var e=0;e<this.size;e++){var r=(this.current-1)*this.size+e;if(!(r<this.prodlist.length))break;var n=this.prodlist[r];this.showlist.push(n)}}}},J=q,K=(r("336d"),Object(i["a"])(J,I,S,!1,null,"611ca22e",null)),A=K.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"details"},[r("img",{attrs:{src:t.prod.imgurl,alt:""}}),r("div",[r("p",[t._v("产品名称："+t._s(t.prod.name))]),r("p",[t._v("产品价格："),r("span",{staticStyle:{color:"#ed4014","font-weight":"bold","font-size":"18px"}},[t._v(t._s(t.prod.price))]),t._v("元")]),r("p",[t._v("详细说明："+t._s(t.prod.desc))]),r("p",[r("Button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){return t.addCart()}}},[t._v("点击购买")])],1)])])},N=[],F=(r("7db0"),r("b0c0"),{name:"Details",data:function(){return{prod:null}},created:function(){var t=this.$route.query.id;this.prod=this.getProdById(t)},methods:{getProdById:function(t){var e=this.$store.state.prodlist.find((function(e){return e.id==t}));return e},addCart:function(){this.$store.commit("addCart",{id:this.prod.id,name:this.prod.name,price:this.prod.price,imgurl:this.prod.imgurl,count:1}),this.$router.push("/cart")}}}),G=F,H=(r("5cd4"),Object(i["a"])(G,D,N,!1,null,"78a2680e",null)),Q=H.exports,V=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart"},[r("nav",[r("router-link",{attrs:{to:"/productlist"}},[t._v("继续购物")]),r("span",[t._v("当前用户："+t._s(this.$store.state.loginuser))])],1),r("table",{attrs:{border:"1",cellspacing:"0",cellpadding:"0"}},[t._m(0),r("tbody",t._l(this.$store.state.cartlist,(function(e,n){return r("tr",{key:n},[r("td",[t._v(t._s(n+1))]),r("td",[r("img",{attrs:{src:e.imgurl}})]),r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.price))]),r("td",[r("button",{on:{click:function(e){return t.modify(n,1)}}},[t._v("+")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.count,expression:"item.count"}],attrs:{type:"text"},domProps:{value:e.count},on:{input:function(r){r.target.composing||t.$set(e,"count",r.target.value)}}}),r("button",{on:{click:function(e){return t.modify(n,-1)}}},[t._v("-")])]),r("td",[t._v(t._s(e.price*e.count))]),r("td",[r("button",{on:{click:function(e){return t.del(n)}}},[t._v("删除")])])])})),0),r("tfoot",[r("tr",[r("td",{attrs:{colspan:"7"}},[t._v("总计："+t._s(t.total))])])])])])},W=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("序号")]),r("th",[t._v("产品图片")]),r("th",[t._v("产品名称")]),r("th",[t._v("产品单价")]),r("th",[t._v("产品数量")]),r("th",[t._v("小计")]),r("th",[t._v("操作")])])])}],X=(r("4160"),r("159b"),{name:"Cart",data:function(){return{}},computed:{total:function(){var t=0;return this.$store.state.cartlist.forEach((function(e){t+=e.price*e.count})),t}},methods:{modify:function(t,e){this.$store.commit("modifyCartCount",{index:t,num:e})},del:function(t){this.$store.commit("deleteCart",t)}}}),Y=X,Z=(r("f21a"),Object(i["a"])(Y,V,W,!1,null,"1297147a",null)),tt=Z.exports;n["default"].use(l["a"]);var et=[{path:"/",name:"index",component:v},{path:"/login",name:"login",component:C},{path:"/register",name:"register",component:E},{path:"/productlist",name:"productlist",component:A},{path:"/details",name:"details",component:Q},{path:"/cart",name:"cart",component:tt}],rt=new l["a"]({mode:"history",base:"/",routes:et}),nt=rt,st=(r("a434"),r("e25e"),r("2f62"));n["default"].use(st["a"]);var at=new st["a"].Store({state:{loginuser:"",prodlist:[],cartlist:[]},mutations:{setLoginUser:function(t,e){t.loginuser=e},setProdList:function(t,e){t.prodlist=[],t.prodlist=e},addCart:function(t,e){var r=null;r=t.cartlist.find((function(t){return t.id==e.id})),void 0!=r?r.count++:t.cartlist.push(e)},modifyCartCount:function(t,e){var r=parseInt(t.cartlist[e.index].count);r+=e.num,t.cartlist[e.index].count=r>=1?r:1},deleteCart:function(t,e){t.cartlist.splice(e,1)}},actions:{},modules:{}}),it=r("f825"),ot=r.n(it),ut=r("2b27"),ct=r.n(ut);r("f8ce");n["default"].config.productionTip=!1,n["default"].use(ot.a),n["default"].use(ct.a),new n["default"]({router:nt,store:at,render:function(t){return t(c)}}).$mount("#app")},"5cd4":function(t,e,r){"use strict";var n=r("c607"),s=r.n(n);s.a},"6a03":function(t,e,r){"use strict";var n=r("ae9f"),s=r.n(n);s.a},"6e32":function(t,e,r){"use strict";var n=r("cba3"),s=r.n(n);s.a},"81e1":function(t,e,r){},"85ec":function(t,e,r){},ad7b:function(t,e,r){},ae9f:function(t,e,r){},c14f:function(t,e,r){},c607:function(t,e,r){},cba3:function(t,e,r){},e270:function(t,e,r){},e337:function(t,e,r){"use strict";var n=r("ad7b"),s=r.n(n);s.a},f21a:function(t,e,r){"use strict";var n=r("e270"),s=r.n(n);s.a}});
//# sourceMappingURL=app.206041d8.js.map